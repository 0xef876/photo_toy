<html>

<head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>성준네컷</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"
    integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <style>
    @font-face {
      font-family: 'KCC-Ganpan';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/KCC-Ganpan.woff2') classmat('woff2');
      font-weight: normal;
      font-style: normal;
    }
    body {
      font-family: "KCC-Ganpan";
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;

    }
    html
    {
      background-color: #444;
    }
    .container {
      width: 390px;
      height: 1100px;
      background-color: #000000;
    }

    .photos {
      margin-top: 30px;
    }

    .photo-frame {
      position: relative;
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      background-color: white;
      margin: 15px 20px;
      height: 200px;
      align-items: center;
      display: flex;
      justify-content: center;

    }


    /* 아래 영역 전체는, flexible하게 하되 그 내부 아이템들은 세로로 쌓을거야 */
    /* 근데 모두 가운데 정렬 했으면 좋겠어! */
    .footer {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* 아래 영역의 제목 부분은 폰트가 좀 두껍고, 사이즈는 25픽셀! 흰색으로 */
    .f-title {
      font-size: 25px;
      font-weight: 900;
      color: #ffffff;
    }

    /* 아래 영역의 날짜 부분은 폰트가 중간 두께고, 사이즈는 15픽셀! 흰색으로 */
    .f-date {
      font-size: 15px;
      font-weight: 500;
      color: #ffffff;
    }

    .photo-frame button {
      display: inline-block;
      padding: .5em .75em;
      color: #000;
      font-size: inherit;
      font-weight: 300;
      font-style: italic;
      line-height: normal;
      vertical-align: middle;
      background-color: #fdfdfd;
      cursor: pointer;
      border: 1px solid #ebebeb;
      border-bottom-color: #e2e2e2;
      border-radius: .25em;
      transition: color .3s ease-in-out, box-shadow .3s ease-in-out;

    }

    .photo-frame button:hover {
      color: white;
      background-color: #555555;
      border-color: #adadad;
    }

    .topbar {
      width: 100%;
      height: 30px;
      padding-bottom: 10px;
      background-color: #000000;
    }

    .menu {
      display: flex;
      justify-content: center;
    }

    .menu button {
      width: 100px;
      height: 50px;
      margin: 10px;
      transition: color .3s ease-in-out, box-shadow .3s ease-in-out;
      display: inline-block;
      border: 1px solid #ebebeb;
      border-bottom-color: #e2e2e2;
      border-radius: .25em;
      color: #000;
      background-color: #ffffff;
      border: 1px solid #ebebeb;
      border-bottom-color: #e2e2e2;
      cursor: pointer;

      border-radius: .25em;
    }

    .menu button:hover {
      color: white;
      background-color: #555555;
      border-color: #adadad;
    }
.title{
  font-size: 30px;
  font-weight: 900;
  color: #ffffff;
  text-align: center;
  margin-top: 10px;
}
  </style>

</head>

<body>
  <div>
  <h1 style="text-align: center;" class="title">사진을 추가해서!</h1>
  <h1 style="text-align: center;" class="title">성준네컷을 만들어보세요!</h1>

  <br>

  <div class="container" id="container">
    <div class="topbar"></div>
    <div class="photos">
      <div id="image1" class="photo-frame">
        <button class="btn1">Upload</button>
      </div>
      <div id="image2" class="photo-frame">
        <button class="btn2">Upload</button>
      </div>
      <div id="image3" class="photo-frame">
        <button class="btn3">Upload</button>
      </div>
      <div id="image4" class="photo-frame">
        <button class="btn4">Upload</button>
      </div>
    </div>
    <div class="footer">
      <p class="f-title">Sung Jun Today</p>
      <p class="f-date"></p>
    </div>
    <br>
    <br>
    <br>
    <div class="menu">
      <button class="store">저장하기</button>
      <button class="reset">다시하기</button>
    </div>
  </div>
</div>
</body>

</html>
<script>


  let today = new Date();

  let year = today.getFullYear(); // 년도
  let month = today.getMonth() + 1;  // 월
  let date = today.getDate();  // 날짜
  var format = year + "." + (("0" + month.toString()).slice(-2)) + "." + (("0" + date.toString()).slice(-2));

  document.querySelector('.f-date').innerHTML = format;


  const btn1 = document.querySelector('.btn1');
  const btn2 = document.querySelector('.btn2');
  const btn3 = document.querySelector('.btn3');
  const btn4 = document.querySelector('.btn4');

  btn1.addEventListener('click', () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => {
        const result = reader.result;
        document.querySelector('#image1').style.backgroundImage = `url(${result})`;
        btn1.remove()
      };
    };
    input.click();
  });

  btn2.addEventListener('click', () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => {
        const result = reader.result;
        document.querySelector('#image2').style.backgroundImage = `url(${result})`;
        btn2.remove()
      };
    };
    input.click();
  });

  btn3.addEventListener('click', () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => {
        const result = reader.result;
        document.querySelector('#image3').style.backgroundImage = `url(${result})`;
        btn3.remove()
      };
    };
    input.click();
  });

  btn4.addEventListener('click', () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => {
        const result = reader.result;
        document.querySelector('#image4').style.backgroundImage = `url(${result})`;
        btn4.remove()
      };
    };
    input.click();
  });

  const reset = document.querySelector('.reset');

  const store = document.querySelector('.store');

  store.addEventListener("click", () => {
    html2canvas(document.getElementById("container")).then(function (canvas) {
      var el = document.createElement("a");
      el.href = canvas.toDataURL("image/jpeg");
      el.download = format+'.jpg'; //다운로드 할 파일명 설정

      // 모바일 기기에서는 el.click() 대신, 링크를 클릭하도록 안내
      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        el.target = "_blank";
        el.innerHTML = "이미지 저장하기 (클릭 후 오른쪽 상단에서 다운로드)";
        document.body.appendChild(el);
      } else {
        // 데스크탑에서는 el.click()으로 다운로드 가능
        el.click();
      }
    });
  });



  reset.addEventListener('click', () => {
    location.reload();
  });


</script>